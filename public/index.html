<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>E-Commerce</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>Product List</h1>

    <div id="product-list" class="product-list"></div>

    <h2>Add New Product</h2>
    <form id="product-form">
      <input type="text" id="name" placeholder="Product Name" required />
      <input type="number" id="price" placeholder="Price" required />
      <button type="submit">Add Product</button>
    </form>
  </div>

  <script src="script.js"></script>
</body>
</html>


<script>

async function fetchProducts() {
  const response = await fetch(`http://localhost:4000/products`);
  const products = await response.json();

  const productList = document.getElementById("product-list");
  productList.innerHTML = "";

  products.forEach(p => {
    const div = document.createElement("div");
    div.classList.add("product-card");
    div.innerHTML = `
      <span>${p.id}. ${p.name}</span>
      <strong>â‚¹${p.price}</strong>
    `;
    productList.appendChild(div);
  });
}

const form = document.getElementById("product-form")
form.addEventListener("submit", async e => {
  e.preventDefault();
  const data = {
    name : document.getElementById("name").value,
    price : document.getElementById("price").value
  }

  const response = await fetch(`http://localhost:4000/products`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  });

  if (response.ok) {
    document.getElementById("product-form").reset();
    fetchProducts();
  }
});

fetchProducts();

</script>